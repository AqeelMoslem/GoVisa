{% extends "base.html" %}
{% load static %}

{% block head %}
<link rel="stylesheet" href="{% static 'css/messages.css' %}">
{% endblock %}

{% block content %}
<div class="messages-page">
  <h1>Inbox</h1>
  <table class="messages-table">
    <tr>
      <th>From</th>
      <th>Subject</th>
      <th>Date</th>
    </tr>
    {% for msg in messages %}
    <tr 
      {% if msg.sender == user %}class="sent"{% elif not msg.is_read %}class="unread"{% endif %}
    >
    
      <td>{{ msg.sender }}</td>
      <td><a href="{% url 'message-detail' msg.id %}">{{ msg.subject }}</a></td>
      <td>{{ msg.created_at }}</td>
    </tr>
    {% empty %}
    <tr><td colspan="3">No messages</td></tr>
    {% endfor %}
  </table>
  <a href="{% url 'new-message' %}" class="message-btn">New Message</a>
</div>
{% endblock %}
